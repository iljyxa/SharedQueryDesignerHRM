# Конструктор представлений подсистемы «Зарплата и кадры»

## Общее описание

Форма предназначена для интерактивного формирования представлений запросов в подсистеме «Зарплата и кадры».

<img width="2181" height="1295" alt="image" src="https://github.com/user-attachments/assets/05467f25-ba7d-4141-8fea-0591409c919f" />

## Принцип работы
- Представления запросов - это наборы полей и параметров, описываемые в тексте запроса
- Программный интерфейс преобразует описания в фактические запросы к БД
- Работает по принципу виртуальных таблиц: пользователь указывает необходимые поля, параметры, а получение происходит "под капотом"
- Результат работы - текст запроса для вставки в основной запрос

## Использование результата

<img width="1428" height="860" alt="image" src="https://github.com/user-attachments/assets/1fae5e32-fa3f-4e38-ac99-93372e2c32ca" />

Основное применение представлений - отчеты, печатные формы.
В общем случае, для формирования отчета с представлениями и без, достаточно вызвать процедуру `ЗарплатаКадрыОтчеты.ПриКомпоновкеРезультатаВТабличныйДокумент` в событии ПриКомпоновкеРезультата.
Примеры стандартных и нестандартных варинатов формирования можно найти в типовых отчетах и печатных формах.

Представление может быть всталено в любой текст запроса: Запрос, СКД.
Для замены представления на реальный запрос применяется процедура `ЗарплатаКадрыОбщиеНаборыДанных.ЗаменитьЗапросыКПредставлениямВиртуальныхТаблиц`, в которую передается исходный текст запроса, а также запрос или схема компоновки данных (важно для установки параметров).
Пример с представлением КадровыеДанныеСотрудников:
```bsl
Запрос = Новый Запрос;
Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
Запрос.Текст =
	"ВЫБРАТЬ РАЗРЕШЕННЫЕ
	|	ДАТАВРЕМЯ(2025, 1, 1) КАК Период,
	|	Сотрудники.Ссылка КАК Сотрудник
	|ПОМЕСТИТЬ ВТФильтр
	|ИЗ
	|	Справочник.Сотрудники КАК Сотрудники
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ДАТАВРЕМЯ(1, 1, 1) КАК Период,
	|	ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка) КАК Сотрудник,
	|	"""" КАК ИОФамилия,
	|	0 КАК ОбщийСтажЛет
	|ПОМЕСТИТЬ Представления_КадровыеДанныеСотрудников
	|ИЗ
	|	ВТФильтр КАК ВТФильтр
	|ГДЕ
	|	""ТолькоРазрешенные"" = ИСТИНА";
	
ЗарплатаКадрыОбщиеНаборыДанных.ЗаменитьЗапросыКПредставлениямВиртуальныхТаблиц(Запрос.Текст, Запрос);
Запрос.Выполнить();
```
